#!/usr/bin/env cwl-runner

cwlVersion: "cwl:draft-3"

class: CommandLineTool

requirements:
  - $import: envvar-global.cwl
  - class: InlineJavascriptRequirement
  - class: DockerRequirement
    dockerPull: registry.gitlab.com/uc-cdis/genomel-primary-analysis

inputs:
  - id: nthreads
    type: ["null", int]
    description: "Sets maximum number of threads to use. Defaults to one thread per CPU as reported by sysinfo(). This is usually the number of cores or twice the number of cores if hyper-threading is turned on. Lisenced version only. (e.g. 4)"
    inputBinding:
      position: 1
      prefix: "-c"

  - id: dbname
    type: File
    description: "Full pathname of indexed reference sequence created by novoindex."
    inputBinding:
      position: 2
      prefix: "-d"

  - id: input_read1_fastq_file
    type: File
    description: "FASTQ file for input read (read R1 in Paired End mode)"
    inputBinding:
      position: 3
      prefix: "-f"

  - id: input_read2_fastq_file
    type: ["null", File]
    description: "FASTQ file for read R2 in Paired End mode"
    inputBinding:
      position: 4

  - id: output_name
    type: string
    description: "Name of the output file."
    inputBinding:
      position: 10
      prefix: ">"

outputs:
- id: output_file
  type: File
  outputBinding:
    glob: $(inputs.output_name)

baseCommand: /home/ubuntu/tools/novocraft/novoalign
arguments:
  - valueFrom: "ILM1.8"
    position: 5
    prefix: -F
  - valueFrom: "PE"
    position: 6
    prefix: -i
  - valueFrom: "300,125"
    position: 7
  - valueFrom: "SAM"
    position: 8
    prefix: -o
  - valueFrom: "@RG\tCN:CGR\tPL:ILLUMINA\tID:SB887769_S1_L007_HQ_paired\tSM:SB887769\tPU:SB887769_S1_L007_HQ_paired\tLB:N/A"
    position: 9

description: |
  Usage:    novoalign options
